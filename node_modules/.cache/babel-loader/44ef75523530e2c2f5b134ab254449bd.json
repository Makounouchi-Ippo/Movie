{"ast":null,"code":"var _jsxFileName = \"/Users/miclaude/Desktop/netflix/src/container/MonCompte/InfoPerso/ImageProfil/ImageProfil.jsx\";\nimport React from 'react';\nimport { useState, useEffect } from 'react';\nimport './ImageProfil.css'; // import {FaPlusCircle} from 'react-icons/fa'\n\nimport { CgProfile } from 'react-icons/cg';\nimport firebase from '../../../../fire';\n\nconst ImageProfil = () => {\n  const [image, setImage] = useState(''); // const [url, setUrl] = useState(\"\");\n\n  const [good, setGood] = useState(false);\n  useEffect(() => {\n    if (image.length === 0) setImage(localStorage.getItem('mail'));\n    let id = localStorage.getItem('id');\n    let fileName = 'image';\n    let newDirectory = id;\n\n    if (localStorage.getItem('photo') === null) {\n      firebase.storage().ref(`images/${newDirectory}/${fileName}`).getDownloadURL().then(function (url) {\n        setImage(url);\n      }).catch(err => {\n        console.log('333');\n      });\n      console.log(1111111);\n    }\n\n    if (localStorage.getItem('photo')) {\n      setImage(localStorage.getItem('photo'));\n    }\n  }, []); //let imageProfil = localStorage.getItem('photo');\n  // let imageee = imageProfil === null ?  <CgProfile style={{height:'140px', width:'140px'}}/> : <img src={url} alt='' style={{height:'140px', width:'140px',borderRadius:'10px'}}/>\n\n  const handleChange = e => {\n    if (e.target.files[0]) {\n      if (e.target.files[0] !== image) {\n        setImage(e.target.files[0]);\n        setGood(true);\n      }\n    }\n  };\n\n  const handleUpload = async e => {\n    e.preventDefault();\n\n    if (image !== null && good) {\n      let newDirectory = localStorage.getItem('id');\n      let fileName = 'image';\n      let file = image;\n      let db = firebase.storage().ref(`images/${newDirectory}/${fileName}`);\n      await db.put(file).then(d => console.log(\"Diiid iitt\")).catch(d => console.log(\"do something\"));\n      firebase.storage().ref(`images/${newDirectory}/${fileName}`).getDownloadURL().then(function (url) {\n        setImage(url);\n      });\n      setGood(false);\n    } else return;\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    style: {\n      fontWeight: 'normal',\n      marginTop: '25px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  }, \" Info persos \"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"myTitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }\n  }, \" Renseignez vos coordonn\\xE9es pour pouvoir passez commandes \"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"blockImage1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"TitreContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"titreInContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 21\n    }\n  }, \" Image Profil \"), /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"blockimage2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: image,\n    alt: \"\",\n    style: {\n      height: '140px',\n      width: '140px',\n      borderRadius: '50%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 29\n    }\n  }), !localStorage.getItem('photo') && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"blockButtonPhoto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 64\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    required: true,\n    accept: \"image/*\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleUpload,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 34\n    }\n  }, \"Upload\")))))));\n};\n\nexport default ImageProfil;","map":{"version":3,"sources":["/Users/miclaude/Desktop/netflix/src/container/MonCompte/InfoPerso/ImageProfil/ImageProfil.jsx"],"names":["React","useState","useEffect","CgProfile","firebase","ImageProfil","image","setImage","good","setGood","length","localStorage","getItem","id","fileName","newDirectory","storage","ref","getDownloadURL","then","url","catch","err","console","log","handleChange","e","target","files","handleUpload","preventDefault","file","db","put","d","fontWeight","marginTop","height","width","borderRadius"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { useState,useEffect } from 'react'\nimport './ImageProfil.css'\n// import {FaPlusCircle} from 'react-icons/fa'\nimport { CgProfile } from 'react-icons/cg'\nimport firebase from '../../../../fire'\n\n\nconst ImageProfil = () => {\n\n    const [image, setImage] = useState('');\n   // const [url, setUrl] = useState(\"\");\n    const [good, setGood] = useState(false);\n  \n\n    useEffect(() => {\n        if (image.length === 0)\n            setImage(localStorage.getItem('mail'))\n        let id = localStorage.getItem('id');\n        let fileName = 'image';\n        let newDirectory = id;\n        if (localStorage.getItem('photo') === null){\n            firebase.storage().ref(`images/${newDirectory}/${fileName}`).getDownloadURL()\n                    .then(function(url) {\n                            setImage(url);\n                    })\n                    .catch(err => {\n                        console.log('333')\n                    })\n            console.log(1111111);\n        }\n        if (localStorage.getItem('photo'))\n        {\n           setImage(localStorage.getItem('photo'))\n        } \n    },[])\n\n\n    //let imageProfil = localStorage.getItem('photo');\n   // let imageee = imageProfil === null ?  <CgProfile style={{height:'140px', width:'140px'}}/> : <img src={url} alt='' style={{height:'140px', width:'140px',borderRadius:'10px'}}/>\n    \n    const handleChange = e => {\n        if (e.target.files[0]) {\n            if (e.target.files[0] !== image ) {\n                setImage(e.target.files[0]);\n                setGood(true);\n            }            \n        } \n      };\n    \n      const handleUpload = async (e) => {\n        e.preventDefault(); \n        if (image !== null && good){\n            let newDirectory = localStorage.getItem('id')\n            let fileName = 'image'\n            let file = image\n            let db =  firebase.storage().ref(`images/${newDirectory}/${fileName}`)\n                await db.put(file)\n                  .then( d => console.log(\"Diiid iitt\"))\n                  .catch( d => console.log(\"do something\"))\n            firebase.storage().ref(`images/${newDirectory}/${fileName}`).getDownloadURL().then(function(url) {\n              setImage(url)})\n              setGood(false);  \n             \n        }\n        else \n            return\n      };\n\n    return (\n        <React.Fragment>\n            <h1 style={{fontWeight:'normal',marginTop:'25px'}}> Info persos </h1>\n            <p className='myTitle'> Renseignez vos coordonn√©es pour pouvoir passez commandes </p>\n            <div className='blockImage1'>\n                <div className='TitreContainer'>\n                    <h2 className='titreInContainer'> Image Profil </h2>\n                    <form> \n                        <div className='blockimage2'>\n                            <img src={image} alt='' style={{height:'140px', width:'140px',borderRadius:'50%'}}/>\n                            {!localStorage.getItem('photo') && <div className='blockButtonPhoto'>\n                                <input type ='file' required  accept=\"image/*\" onChange={handleChange} />\n                                 <button onClick={handleUpload}>Upload</button>\n                                {/* <FaPlusCircle className='ButtonPhoto} onClick={addPhoto}/> */}\n                            </div>  }    \n                         </div>\n                    </form>\n                </div>\n            </div>\n        </React.Fragment>\n    )\n}\n\nexport default ImageProfil;"]},"metadata":{},"sourceType":"module"}