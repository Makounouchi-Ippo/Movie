{"ast":null,"code":"var _jsxFileName = \"/Users/mehel-ka/Desktop/netflix/src/container/MonCompte/InfoPerso/FormUser/FormUser.jsx\";\nimport React from 'react';\nimport { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport './FormUser.css'; // import {toast} from 'react-toastify'\n// import 'react-toastify/dist/ReactToastify.css';\n\nimport Form from 'muicss/lib/react/form';\nimport Input from 'muicss/lib/react/input';\nimport { Alert } from 'react-bootstrap';\nimport Button from 'muicss/lib/react/button';\n\nconst FormUser = () => {\n  const [id, setId] = useState('');\n  const [idToken, setIdToken] = useState('');\n  const [name, setName] = useState('');\n  const [lastname, setLastname] = useState('');\n  const [login, setLogin] = useState('');\n  const [address, setAddress] = useState('');\n  const [mail, setMail] = useState(''); //const [error, setError] = useState(null);\n\n  useEffect(() => {\n    if (mail.length === 0) {\n      setMail(localStorage.getItem('mail'));\n    }\n\n    setIdToken(localStorage.getItem('token'));\n    setId(localStorage.getItem('id'));\n    let idLocal = localStorage.getItem('id');\n    axios.get(`https://movies-27cd5.firebaseio.com/${idLocal}/user.json/`).then(response => {\n      //console.log('userrr//////',response.data)\n      setAddress(response.data.address);\n      setName(response.data.name);\n      setLastname(response.data.lastname);\n      setLogin(response.data.login);\n    }).catch(err => {//console.log('DIDMOUNT',err)\n    });\n    axios.get(`https://movies-27cd5.firebaseio.com/${idLocal}/mail.json/`).then(response => {\n      //console.log('MAIL//////',response.data)\n      setMail(response.data.mail);\n    }).catch(error => {//console.log('MAILL//',error)\n    });\n  }, []);\n\n  const handleSubmitMail = event => {\n    event.preventDefault();\n    const authData = {\n      idToken: idToken,\n      email: mail,\n      returnSecureToken: true\n    };\n    axios.post('https://identitytoolkit.googleapis.com/v1/accounts:update?key=AIzaSyDJQ2C-WHsJXu5xVCG5Z98XQ31gRJrSV_E', authData).then(response => {\n      toast.success('Votre profil a ete mis a jour                     ðŸ˜€');\n      const mail = {\n        mail: response.data.email\n      };\n      axios.put(`https://movies-27cd5.firebaseio.com/${id}/mail.json/`, mail).then(response => {\n        console.log('MailResponse', response);\n      }).catch(error => {\n        console.log('MailResponse', error);\n      });\n    }).catch(err => {\n      console.log('maillllll', err.response.data.error.message); // setError('Mail deja utilisÃ© veuilleur le modifier')\n\n      toast.error('Erreur, veuillez ressayer plus tard                     ðŸ˜®');\n    });\n  };\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    console.log('STATE===', name, lastname, login, address);\n    const data = {\n      name: name,\n      lastname: lastname,\n      login: login,\n      address: address //mail: mail\n\n    }; //setAlert(false)\n\n    axios.put(`https://movies-27cd5.firebaseio.com/${id}/user.json/`, data).then(response => {\n      console.log('data', response);\n      toast.success('Votre profil a ete mis a jour                     ðŸ˜€');\n    }).catch(err => {\n      console.log('data', err.response);\n      toast.error('Erreur, veuillez ressayer plus tard                     ðŸ˜®');\n    });\n  };\n\n  let inputMail = null;\n  localStorage.getItem('social') ? inputMail = /*#__PURE__*/React.createElement(\"div\", {\n    className: \"blockImage3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"TitreContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"titreInContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 21\n    }\n  }, \"Mail \"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    onSubmit: handleSubmitMail,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    label: \"E-mail\",\n    minLength: \"6\",\n    type: \"email\",\n    floatingLabel: true,\n    value: mail,\n    pattern: \"[a-z0-9._%+-]+@[a-z0-9.-]+\\\\.[a-z]{2,}$\",\n    required: true,\n    title: \"email incorrect ex: netflix@gmail.com\",\n    onChange: e => setMail(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"buttonUser\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"raised\",\n    style: {\n      textAlign: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 29\n    }\n  }, \"Submit\")))))) : inputMail = null;\n  msgSuccess = alert ? /*#__PURE__*/React.createElement(Alert, {\n    variant: \"success\",\n    style: {\n      width: 'auto',\n      height: 'auto',\n      textAlign: 'center',\n      top: '-450px'\n    },\n    onClose: () => setAlert(false),\n    dismissible: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Alert.Heading, {\n    style: {\n      width: 'auto'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 23\n    }\n  }, \"Votre profil a bien \\xE9t\\xE9 mis a jour\")) : null;\n  msgError = alert1 ? /*#__PURE__*/React.createElement(Alert, {\n    variant: \"danger\",\n    style: {\n      width: 'auto',\n      height: 'auto',\n      textAlign: 'center',\n      top: '-450px'\n    },\n    onClose: () => setAlert1(false),\n    dismissible: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 24\n    }\n  }, /*#__PURE__*/React.createElement(Alert.Heading, {\n    style: {\n      width: 'auto'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 3\n    }\n  }, \"Trop d'essaie , veuillez essayer ulterieurement\")) : null;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }\n  }, msgSuccess, msgError, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"blockImage1User\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"TitreContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"titreInContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 25\n    }\n  }, \"Infos Utilisateurs \"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    label: \"Nom\",\n    type: \"name\",\n    floatingLabel: true,\n    minLength: \"3\",\n    maxLength: \"30\",\n    pattern: \"[A-Za-z]{1,32}\",\n    value: name,\n    required: true,\n    title: \"Nom incorrect\",\n    onChange: e => setName(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    label: \"Prenom\",\n    type: \"lastName\",\n    floatingLabel: true,\n    minLength: \"3\",\n    maxLength: \"30\",\n    pattern: \"[A-Za-z]{1,32}\",\n    value: lastname,\n    required: true,\n    title: \"Prenom incorrect\",\n    onChange: e => setLastname(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    label: \"Login\",\n    type: \"login\",\n    floatingLabel: true,\n    required: true,\n    pattern: \"[A-Za-z0-9]+\",\n    value: login,\n    title: \"lettres et chiffre seulement, pas de ponctuation et caracteres speciaux\",\n    onChange: e => setLogin(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    label: \"Address\",\n    type: \"address\",\n    floatingLabel: true,\n    required: true,\n    pattern: \"([a-zA-Z0-9\\xE1\\xE0\\xE2\\xE4\\xE3\\xE5\\xE7\\xE9\\xE8\\xEA\\xEB\\xED\\xEC\\xEE\\xEF\\xF1\\xF3\\xF2\\xF4\\xF6\\xF5\\xFA\\xF9\\xFB\\xFC\\xFD\\xFF\\xE6\\u0153\\xC1\\xC0\\xC2\\xC4\\xC3\\xC5\\xC7\\xC9\\xC8\\xCA\\xCB\\xCD\\xCC\\xCE\\xCF\\xD1\\xD3\\xD2\\xD4\\xD6\\xD5\\xDA\\xD9\\xDB\\xDC\\xDD\\u0178\\xC6\\u0152_-]| |/|\\\\\\\\|@|#|\\\\$|%|&)+\",\n    value: address,\n    title: \"pas de caracteres speciaux\",\n    onChange: e => setAddress(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"buttonUser\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"raised\",\n    style: {\n      textAlign: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 35\n    }\n  }, \"Submit\")))))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 14\n    }\n  }, inputMail));\n};\n\nexport default FormUser;","map":{"version":3,"sources":["/Users/mehel-ka/Desktop/netflix/src/container/MonCompte/InfoPerso/FormUser/FormUser.jsx"],"names":["React","useEffect","useState","axios","Form","Input","Alert","Button","FormUser","id","setId","idToken","setIdToken","name","setName","lastname","setLastname","login","setLogin","address","setAddress","mail","setMail","length","localStorage","getItem","idLocal","get","then","response","data","catch","err","error","handleSubmitMail","event","preventDefault","authData","email","returnSecureToken","post","toast","success","put","console","log","message","handleSubmit","inputMail","e","target","value","textAlign","msgSuccess","alert","width","height","top","setAlert","msgError","alert1","setAlert1"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,EAAmBC,QAAnB,QAAkC,OAAlC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAO,gBAAP,C,CACA;AACA;;AACA,OAAOC,IAAP,MAAiB,uBAAjB;AACA,OAAOC,KAAP,MAAkB,wBAAlB;AACA,SAAQC,KAAR,QAAoB,iBAApB;AACA,OAAOC,MAAP,MAAmB,yBAAnB;;AAEA,MAAMC,QAAQ,GAAG,MAAM;AAEnB,QAAM,CAACC,EAAD,EAAKC,KAAL,IAAcR,QAAQ,CAAC,EAAD,CAA5B;AACA,QAAM,CAACS,OAAD,EAAUC,UAAV,IAAwBV,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAACW,IAAD,EAAOC,OAAP,IAAkBZ,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACa,QAAD,EAAWC,WAAX,IAA0Bd,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACe,KAAD,EAAQC,QAAR,IAAoBhB,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACiB,OAAD,EAAUC,UAAV,IAAwBlB,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAACmB,IAAD,EAAOC,OAAP,IAAkBpB,QAAQ,CAAC,EAAD,CAAhC,CARmB,CAUnB;;AAEAD,EAAAA,SAAS,CAAC,MAAM;AAEZ,QAAIoB,IAAI,CAACE,MAAL,KAAgB,CAApB,EAAsB;AAClBD,MAAAA,OAAO,CAACE,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAD,CAAP;AACH;;AACFb,IAAAA,UAAU,CAACY,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAD,CAAV;AACAf,IAAAA,KAAK,CAACc,YAAY,CAACC,OAAb,CAAqB,IAArB,CAAD,CAAL;AACA,QAAIC,OAAO,GAAGF,YAAY,CAACC,OAAb,CAAqB,IAArB,CAAd;AAEAtB,IAAAA,KAAK,CAACwB,GAAN,CAAW,uCAAsCD,OAAQ,aAAzD,EACCE,IADD,CACMC,QAAQ,IAAI;AACb;AACAT,MAAAA,UAAU,CAACS,QAAQ,CAACC,IAAT,CAAcX,OAAf,CAAV;AACAL,MAAAA,OAAO,CAACe,QAAQ,CAACC,IAAT,CAAcjB,IAAf,CAAP;AACAG,MAAAA,WAAW,CAACa,QAAQ,CAACC,IAAT,CAAcf,QAAf,CAAX;AACAG,MAAAA,QAAQ,CAACW,QAAQ,CAACC,IAAT,CAAcb,KAAf,CAAR;AACJ,KAPD,EAQCc,KARD,CAQOC,GAAG,IAAI,CACT;AACJ,KAVD;AAWF7B,IAAAA,KAAK,CAACwB,GAAN,CAAW,uCAAsCD,OAAQ,aAAzD,EACIE,IADJ,CACSC,QAAQ,IAAI;AACjB;AACAP,MAAAA,OAAO,CAACO,QAAQ,CAACC,IAAT,CAAcT,IAAf,CAAP;AACA,KAJJ,EAIMU,KAJN,CAIYE,KAAK,IAAI,CACd;AACH,KANJ;AAOE,GA3BM,EA2BL,EA3BK,CAAT;;AA6BA,QAAMC,gBAAgB,GAAGC,KAAD,IAAW;AAC/BA,IAAAA,KAAK,CAACC,cAAN;AACA,UAAMC,QAAQ,GAAG;AACb1B,MAAAA,OAAO,EAACA,OADK;AAEb2B,MAAAA,KAAK,EAAEjB,IAFM;AAGbkB,MAAAA,iBAAiB,EAAE;AAHN,KAAjB;AAKApC,IAAAA,KAAK,CAACqC,IAAN,CAAW,uGAAX,EAAmHH,QAAnH,EACCT,IADD,CACMC,QAAQ,IAAI;AACdY,MAAAA,KAAK,CAACC,OAAN,CAAc,sDAAd;AACA,YAAMrB,IAAI,GAAG;AAAEA,QAAAA,IAAI,EAACQ,QAAQ,CAACC,IAAT,CAAcQ;AAArB,OAAb;AACAnC,MAAAA,KAAK,CAACwC,GAAN,CAAW,uCAAsClC,EAAG,aAApD,EAAiEY,IAAjE,EACCO,IADD,CACMC,QAAQ,IAAG;AAAEe,QAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA2BhB,QAA3B;AAAsC,OADzD,EAECE,KAFD,CAEOE,KAAK,IAAI;AAAEW,QAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA2BZ,KAA3B;AAAmC,OAFrD;AAGH,KAPD,EAQCF,KARD,CAQOC,GAAG,IAAI;AACVY,MAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAwBb,GAAG,CAACH,QAAJ,CAAaC,IAAb,CAAkBG,KAAlB,CAAwBa,OAAhD,EADU,CAEX;;AACAL,MAAAA,KAAK,CAACR,KAAN,CAAY,4DAAZ;AACF,KAZD;AAaH,GApBD;;AAsBA,QAAMc,YAAY,GAAGZ,KAAD,IAAW;AAC3BA,IAAAA,KAAK,CAACC,cAAN;AACAQ,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAuBhC,IAAvB,EAA4BE,QAA5B,EAAqCE,KAArC,EAA2CE,OAA3C;AACA,UAAMW,IAAI,GAAG;AACTjB,MAAAA,IAAI,EAACA,IADI;AAETE,MAAAA,QAAQ,EAAEA,QAFD;AAGTE,MAAAA,KAAK,EAAEA,KAHE;AAITE,MAAAA,OAAO,EAAEA,OAJA,CAKT;;AALS,KAAb,CAH2B,CAU3B;;AACAhB,IAAAA,KAAK,CAACwC,GAAN,CAAW,uCAAsClC,EAAG,aAApD,EAAiEqB,IAAjE,EACCF,IADD,CACMC,QAAQ,IAAI;AACde,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAmBhB,QAAnB;AACAY,MAAAA,KAAK,CAACC,OAAN,CAAc,sDAAd;AACH,KAJD,EAKCX,KALD,CAKOC,GAAG,IAAI;AACVY,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAmBb,GAAG,CAACH,QAAvB;AACAY,MAAAA,KAAK,CAACR,KAAN,CAAY,4DAAZ;AACH,KARD;AASH,GApBD;;AAyBD,MAAIe,SAAS,GAAG,IAAhB;AAEAxB,EAAAA,YAAY,CAACC,OAAb,CAAqB,QAArB,IAAiCuB,SAAS,gBACjC;AAAK,IAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAI,IAAA,SAAS,EAAC,kBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADJ,eAEI;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,IAAD;AAAM,IAAA,QAAQ,EAAEd,gBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,KAAD;AAAO,IAAA,KAAK,EAAC,QAAb;AAAsB,IAAA,SAAS,EAAC,GAAhC;AAAoC,IAAA,IAAI,EAAC,OAAzC;AAAiD,IAAA,aAAa,EAAE,IAAhE;AAAsE,IAAA,KAAK,EAAEb,IAA7E;AAAmF,IAAA,OAAO,EAAC,yCAA3F;AAAoI,IAAA,QAAQ,MAA5I;AAA6I,IAAA,KAAK,EAAC,uCAAnJ;AAA4L,IAAA,QAAQ,EAAG4B,CAAD,IAAM3B,OAAO,CAAC2B,CAAC,CAACC,MAAF,CAASC,KAAV,CAAnN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,eAEI;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACA,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAC,QAAhB;AAAyB,IAAA,KAAK,EAAE;AAACC,MAAAA,SAAS,EAAC;AAAX,KAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADA,CAFJ,CADJ,CAFJ,CADJ,CADT,GAamBJ,SAAS,GAAG,IAb/B;AAeDK,EAAAA,UAAU,GAAGC,KAAK,gBAAI,oBAAC,KAAD;AAAO,IAAA,OAAO,EAAC,SAAf;AAA0B,IAAA,KAAK,EAAE;AAACC,MAAAA,KAAK,EAAC,MAAP;AAAcC,MAAAA,MAAM,EAAC,MAArB;AAA4BJ,MAAAA,SAAS,EAAC,QAAtC;AAA+CK,MAAAA,GAAG,EAAC;AAAnD,KAAjC;AAA+F,IAAA,OAAO,EAAE,MAAMC,QAAQ,CAAC,KAAD,CAAtH;AAA+H,IAAA,WAAW,MAA1I;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACF,oBAAC,KAAD,CAAO,OAAP;AAAe,IAAA,KAAK,EAAE;AAACH,MAAAA,KAAK,EAAC;AAAP,KAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gDADE,CAAJ,GAEK,IAFvB;AAGAI,EAAAA,QAAQ,GAAGC,MAAM,gBAAI,oBAAC,KAAD;AAAO,IAAA,OAAO,EAAC,QAAf;AAAyB,IAAA,KAAK,EAAE;AAACL,MAAAA,KAAK,EAAC,MAAP;AAAcC,MAAAA,MAAM,EAAC,MAArB;AAA4BJ,MAAAA,SAAS,EAAC,QAAtC;AAA+CK,MAAAA,GAAG,EAAC;AAAnD,KAAhC;AAA8F,IAAA,OAAO,EAAE,MAAMI,SAAS,CAAC,KAAD,CAAtH;AAA+H,IAAA,WAAW,MAA1I;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACrB,oBAAC,KAAD,CAAO,OAAP;AAAe,IAAA,KAAK,EAAE;AAACN,MAAAA,KAAK,EAAC;AAAP,KAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uDADqB,CAAJ,GAEV,IAFP;AAIE,sBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKF,UADL,EAEKM,QAFL,eAGI;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACQ;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAI,IAAA,SAAS,EAAC,kBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADJ,eAEI;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,IAAD;AAAM,IAAA,QAAQ,EAAEZ,YAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,KAAD;AAAO,IAAA,KAAK,EAAC,KAAb;AAAmB,IAAA,IAAI,EAAC,MAAxB;AAA+B,IAAA,aAAa,EAAE,IAA9C;AAAoD,IAAA,SAAS,EAAC,GAA9D;AAAkE,IAAA,SAAS,EAAC,IAA5E;AAAiF,IAAA,OAAO,EAAC,gBAAzF;AAA0G,IAAA,KAAK,EAAElC,IAAjH;AAAuH,IAAA,QAAQ,MAA/H;AAAgI,IAAA,KAAK,EAAC,eAAtI;AAAsJ,IAAA,QAAQ,EAAGoC,CAAD,IAAMnC,OAAO,CAACmC,CAAC,CAACC,MAAF,CAASC,KAAV,CAA7K;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,eAEI,oBAAC,KAAD;AAAO,IAAA,KAAK,EAAC,QAAb;AAAsB,IAAA,IAAI,EAAC,UAA3B;AAAuC,IAAA,aAAa,EAAE,IAAtD;AAA4D,IAAA,SAAS,EAAC,GAAtE;AAA0E,IAAA,SAAS,EAAC,IAApF;AAAyF,IAAA,OAAO,EAAC,gBAAjG;AAAkH,IAAA,KAAK,EAAEpC,QAAzH;AAAmI,IAAA,QAAQ,MAA3I;AAA4I,IAAA,KAAK,EAAC,kBAAlJ;AAAqK,IAAA,QAAQ,EAAGkC,CAAD,IAAMjC,WAAW,CAACiC,CAAC,CAACC,MAAF,CAASC,KAAV,CAAhM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,eAGI,oBAAC,KAAD;AAAO,IAAA,KAAK,EAAC,OAAb;AAAqB,IAAA,IAAI,EAAC,OAA1B;AAAmC,IAAA,aAAa,EAAE,IAAlD;AAAwD,IAAA,QAAQ,MAAhE;AAAkE,IAAA,OAAO,EAAC,cAA1E;AAAyF,IAAA,KAAK,EAAElC,KAAhG;AAAuG,IAAA,KAAK,EAAE,yEAA9G;AAAwL,IAAA,QAAQ,EAAGgC,CAAD,IAAM/B,QAAQ,CAAC+B,CAAC,CAACC,MAAF,CAASC,KAAV,CAAhN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHJ,eAII,oBAAC,KAAD;AAAO,IAAA,KAAK,EAAC,SAAb;AAAuB,IAAA,IAAI,EAAC,SAA5B;AAAuC,IAAA,aAAa,EAAE,IAAtD;AAA6D,IAAA,QAAQ,MAArE;AAAsE,IAAA,OAAO,EAAC,qRAA9E;AAA6K,IAAA,KAAK,EAAEhC,OAApL;AAA6L,IAAA,KAAK,EAAE,4BAApM;AAAkO,IAAA,QAAQ,EAAG8B,CAAD,IAAM7B,UAAU,CAAC6B,CAAC,CAACC,MAAF,CAASC,KAAV,CAA5P;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJJ,eAKI;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAC,QAAhB;AAAyB,IAAA,KAAK,EAAE;AAACC,MAAAA,SAAS,EAAC;AAAX,KAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,CALJ,CADJ,CAFJ,CADR,CAHJ,eAmBK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACOJ,SADP,CAnBL,CADJ;AAyBH,CAzID;;AA2IA,eAAexC,QAAf","sourcesContent":["import React from 'react'\nimport { useEffect,useState} from 'react';\nimport axios from 'axios'\nimport './FormUser.css'\n// import {toast} from 'react-toastify'\n// import 'react-toastify/dist/ReactToastify.css';\nimport Form from 'muicss/lib/react/form';\nimport Input from 'muicss/lib/react/input';\nimport {Alert} from 'react-bootstrap';\nimport Button from 'muicss/lib/react/button';\n\nconst FormUser = () => {\n\n    const [id, setId] = useState('');\n    const [idToken, setIdToken] = useState('');\n    const [name, setName] = useState('');\n    const [lastname, setLastname] = useState('');\n    const [login, setLogin] = useState('');\n    const [address, setAddress] = useState('');\n    const [mail, setMail] = useState('');\n\n    //const [error, setError] = useState(null);\n\n    useEffect(() => {\n        \n        if (mail.length === 0){\n            setMail(localStorage.getItem('mail'))\n        }\n       setIdToken(localStorage.getItem('token'))\n       setId(localStorage.getItem('id'))\n       let idLocal = localStorage.getItem('id')\n    \n       axios.get(`https://movies-27cd5.firebaseio.com/${idLocal}/user.json/`)\n       .then(response => {\n            //console.log('userrr//////',response.data)\n            setAddress(response.data.address) \n            setName(response.data.name)   \n            setLastname(response.data.lastname)  \n            setLogin(response.data.login)  \n       })\n       .catch(err => {\n            //console.log('DIDMOUNT',err)\n       })\n     axios.get(`https://movies-27cd5.firebaseio.com/${idLocal}/mail.json/`)\n        .then(response => {\n         //console.log('MAIL//////',response.data)\n         setMail(response.data.mail);\n        }).catch(error => {\n            //console.log('MAILL//',error)\n        })\n      },[]) \n\n    const handleSubmitMail =(event) => {\n        event.preventDefault(); \n        const authData = {\n            idToken:idToken,\n            email: mail,\n            returnSecureToken: true\n        };\n        axios.post('https://identitytoolkit.googleapis.com/v1/accounts:update?key=AIzaSyDJQ2C-WHsJXu5xVCG5Z98XQ31gRJrSV_E',authData)\n        .then(response => {\n            toast.success('Votre profil a ete mis a jour                     ðŸ˜€')\n            const mail = { mail:response.data.email };\n            axios.put(`https://movies-27cd5.firebaseio.com/${id}/mail.json/`,mail)\n            .then(response =>{ console.log('MailResponse',response) })\n            .catch(error => { console.log('MailResponse',error) })\n        })\n        .catch(err => {\n            console.log('maillllll',err.response.data.error.message)\n           // setError('Mail deja utilisÃ© veuilleur le modifier')\n           toast.error('Erreur, veuillez ressayer plus tard                     ðŸ˜®')\n        })      \n    }\n\n    const handleSubmit =(event) => {\n        event.preventDefault(); \n        console.log('STATE===',name,lastname,login,address)\n        const data = {\n            name:name,\n            lastname: lastname,\n            login: login,\n            address: address,\n            //mail: mail\n        };\n        //setAlert(false)\n        axios.put(`https://movies-27cd5.firebaseio.com/${id}/user.json/`,data)\n        .then(response => {\n            console.log('data',response);  \n            toast.success('Votre profil a ete mis a jour                     ðŸ˜€')    \n        })\n        .catch(err => {\n            console.log('data',err.response)\n            toast.error('Erreur, veuillez ressayer plus tard                     ðŸ˜®')\n        })    \n    }\n\n  \n\n\n   let inputMail = null;\n  \n   localStorage.getItem('social') ? inputMail = (\n            <div className='blockImage3'>\n                <div className='TitreContainer'>\n                    <h2 className='titreInContainer'>Mail </h2>\n                    <div className='Form'>\n                        <Form onSubmit={handleSubmitMail}>\n                            <Input label=\"E-mail\" minLength=\"6\" type=\"email\" floatingLabel={true} value={mail} pattern=\"[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,}$\" required title=\"email incorrect ex: netflix@gmail.com\"  onChange={(e)=> setMail(e.target.value)}  />\n                            <div className='buttonUser'>\n                            <Button variant=\"raised\" style={{textAlign:'center'}}>Submit</Button>\n                            </div> \n                        </Form>\n                    </div>     \n                </div>\n            </div>) : inputMail = null;\n\n  msgSuccess = alert ?  <Alert variant=\"success\"  style={{width:'auto',height:'auto',textAlign:'center',top:'-450px'}} onClose={() => setAlert(false)} dismissible>\n                      <Alert.Heading style={{width:'auto'}}>Votre profil a bien Ã©tÃ© mis a jour</Alert.Heading>\n                </Alert>:null\n  msgError = alert1 ?  <Alert variant=\"danger\"  style={{width:'auto',height:'auto',textAlign:'center',top:'-450px'}} onClose={() => setAlert1(false)} dismissible>\n  <Alert.Heading style={{width:'auto'}}>Trop d'essaie , veuillez essayer ulterieurement</Alert.Heading>\n</Alert>:null\n\n    return (\n        <div> \n            {msgSuccess}\n            {msgError}\n            <div className='blockImage1User'>\n                    <div className='TitreContainer'>\n                        <h2 className='titreInContainer'>Infos Utilisateurs </h2>\n                        <div className='Form'>\n                            <Form onSubmit={handleSubmit}>\n                                <Input label=\"Nom\" type=\"name\" floatingLabel={true} minLength=\"3\" maxLength=\"30\" pattern=\"[A-Za-z]{1,32}\" value={name} required title=\"Nom incorrect\" onChange={(e)=> setName(e.target.value)} />\n                                <Input label=\"Prenom\" type=\"lastName\"  floatingLabel={true} minLength=\"3\" maxLength=\"30\" pattern=\"[A-Za-z]{1,32}\" value={lastname} required title=\"Prenom incorrect\" onChange={(e)=> setLastname(e.target.value)} />\n                                <Input label=\"Login\" type=\"login\"  floatingLabel={true} required  pattern=\"[A-Za-z0-9]+\" value={login} title= \"lettres et chiffre seulement, pas de ponctuation et caracteres speciaux\" onChange={(e)=> setLogin(e.target.value)}/>\n                                <Input label=\"Address\" type=\"address\"  floatingLabel={true}  required pattern=\"([a-zA-Z0-9Ã¡Ã Ã¢Ã¤Ã£Ã¥Ã§Ã©Ã¨ÃªÃ«Ã­Ã¬Ã®Ã¯Ã±Ã³Ã²Ã´Ã¶ÃµÃºÃ¹Ã»Ã¼Ã½Ã¿Ã¦Å“ÃÃ€Ã‚Ã„ÃƒÃ…Ã‡Ã‰ÃˆÃŠÃ‹ÃÃŒÃŽÃÃ‘Ã“Ã’Ã”Ã–Ã•ÃšÃ™Ã›ÃœÃÅ¸Ã†Å’_-]| |/|\\\\|@|#|\\$|%|&)+\" value={address} title= \"pas de caracteres speciaux\"  onChange={(e)=> setAddress(e.target.value)}/>\n                                <div className='buttonUser'>\n                                  <Button variant=\"raised\" style={{textAlign:'center'}}>Submit</Button>\n                                </div> \n                            </Form>\n                        </div>     \n                    </div>    \n             </div>\n             <div>\n                   {inputMail}          \n             </div>\n        </div>\n    )\n}\n\nexport default FormUser;"]},"metadata":{},"sourceType":"module"}