{"ast":null,"code":"var _jsxFileName = \"/Users/mehel-ka/Desktop/Hypertube/src/container/MonCompte/InfoPerso/FormUser/FormUser.jsx\";\nimport React from 'react';\nimport { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport './FormUser.css'; // import {toast} from 'react-toastify'\n// import 'react-toastify/dist/ReactToastify.css';\n\nimport Form from 'muicss/lib/react/form';\nimport Input from 'muicss/lib/react/input'; //import {Alert} from 'react-bootstrap';\n\nimport Button from 'muicss/lib/react/button';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nconst FormUser = () => {\n  const [id, setId] = useState('');\n  const [idToken, setIdToken] = useState('');\n  const [name, setName] = useState('');\n  const [lastname, setLastname] = useState('');\n  const [login, setLogin] = useState('');\n  const [address, setAddress] = useState('');\n  const [mail, setMail] = useState(''); //const [error, setError] = useState(null);\n\n  useEffect(() => {\n    if (mail.length === 0) {\n      setMail(localStorage.getItem('mail'));\n    }\n\n    setIdToken(localStorage.getItem('token'));\n    setId(localStorage.getItem('id'));\n    let idLocal = localStorage.getItem('id');\n    axios.get(`https://api.comparatrip.eu/cities/popular/from/nice/5`).then(response => {\n      console.log('userrr//////', response.data[0]);\n    }).catch(err => {\n      console.log('DIDMOUNT', err);\n    });\n    axios.get(`https://movies-27cd5.firebaseio.com/${idLocal}/mail.json/`).then(response => {\n      //console.log('MAIL//////',response.data)\n      setMail(response.data.mail);\n    }).catch(error => {//console.log('MAILL//',error)\n    });\n  }, []);\n\n  const handleSubmitMail = event => {\n    event.preventDefault();\n    const authData = {\n      idToken: idToken,\n      email: mail,\n      returnSecureToken: true\n    };\n    axios.post('https://identitytoolkit.googleapis.com/v1/accounts:update?key=AIzaSyDJQ2C-WHsJXu5xVCG5Z98XQ31gRJrSV_E', authData).then(response => {\n      toast.success('Votre profil a ete mis a jour                     😀', {\n        autoClose: 3000,\n        closeButton: false,\n        className: 'toast1'\n      });\n      const mail = {\n        mail: response.data.email\n      };\n      axios.put(`https://movies-27cd5.firebaseio.com/${id}/mail.json/`, mail).then(response => {\n        console.log('MailResponse', response);\n      }).catch(error => {\n        console.log('MailResponse', error);\n      });\n    }).catch(err => {\n      console.log('maillllll', err.response.data.error.message); // setError('Mail deja utilisé veuilleur le modifier')\n\n      toast.error('Erreur, Veuillez vous reconnectez                     😮', {\n        autoClose: 3000,\n        closeButton: false,\n        className: 'toast1'\n      });\n    });\n  };\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    console.log('STATE===', name, lastname, login, address);\n    const data = {\n      name: name,\n      lastname: lastname,\n      login: login,\n      address: address //mail: mail\n\n    }; //setAlert(false)\n\n    axios.put(`https://movies-27cd5.firebaseio.com/${id}/user.json/`, data).then(response => {\n      console.log('data', response);\n      toast.success('Votre profil a ete mis a jour                     😀', {\n        autoClose: 3000,\n        closeButton: false,\n        className: 'toast1'\n      });\n    }).catch(err => {\n      console.log('data', err.response);\n      toast.error('Erreur, Veuillez vous reconnectez                        😮', {\n        autoClose: 3000,\n        closeButton: false,\n        className: 'toast1'\n      });\n    });\n  };\n\n  let inputMail = null;\n  localStorage.getItem('social') ? inputMail = /*#__PURE__*/React.createElement(\"div\", {\n    className: \"blockImage3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"TitreContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"titreInContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 21\n    }\n  }, \"Mail \"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    onSubmit: handleSubmitMail,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    label: \"E-mail\",\n    minLength: \"6\",\n    type: \"email\",\n    floatingLabel: true,\n    value: mail,\n    pattern: \"[a-z0-9._%+-]+@[a-z0-9.-]+\\\\.[a-z]{2,}$\",\n    required: true,\n    title: \"email incorrect ex: netflix@gmail.com\",\n    onChange: e => setMail(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"buttonUser\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"raised\",\n    style: {\n      textAlign: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 29\n    }\n  }, \"Submit\")))))) : inputMail = null;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(ToastContainer, {\n    position: \"top-center\",\n    autoClose: 3000,\n    hideProgressBar: false,\n    newestOnTop: false,\n    closeOnClick: true,\n    rtl: false,\n    pauseOnFocusLoss: true,\n    draggable: true,\n    pauseOnHover: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 14\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"blockImage1User\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"TitreContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"titreInContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 25\n    }\n  }, \"Infos Utilisateurs \"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    label: \"Nom\",\n    type: \"name\",\n    floatingLabel: true,\n    minLength: \"3\",\n    maxLength: \"30\",\n    pattern: \"[A-Za-z]{1,32}\",\n    value: name,\n    required: true,\n    title: \"Nom incorrect\",\n    onChange: e => setName(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    label: \"Prenom\",\n    type: \"lastName\",\n    floatingLabel: true,\n    minLength: \"3\",\n    maxLength: \"30\",\n    pattern: \"[A-Za-z]{1,32}\",\n    value: lastname,\n    required: true,\n    title: \"Prenom incorrect\",\n    onChange: e => setLastname(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    label: \"Login\",\n    type: \"login\",\n    floatingLabel: true,\n    required: true,\n    pattern: \"[A-Za-z0-9]+\",\n    value: login,\n    title: \"lettres et chiffre seulement, pas de ponctuation et caracteres speciaux\",\n    onChange: e => setLogin(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    label: \"Address\",\n    type: \"address\",\n    floatingLabel: true,\n    required: true,\n    pattern: \"([a-zA-Z0-9\\xE1\\xE0\\xE2\\xE4\\xE3\\xE5\\xE7\\xE9\\xE8\\xEA\\xEB\\xED\\xEC\\xEE\\xEF\\xF1\\xF3\\xF2\\xF4\\xF6\\xF5\\xFA\\xF9\\xFB\\xFC\\xFD\\xFF\\xE6\\u0153\\xC1\\xC0\\xC2\\xC4\\xC3\\xC5\\xC7\\xC9\\xC8\\xCA\\xCB\\xCD\\xCC\\xCE\\xCF\\xD1\\xD3\\xD2\\xD4\\xD6\\xD5\\xDA\\xD9\\xDB\\xDC\\xDD\\u0178\\xC6\\u0152_-]| |/|\\\\\\\\|@|#|\\\\$|%|&)+\",\n    value: address,\n    title: \"pas de caracteres speciaux\",\n    onChange: e => setAddress(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"buttonUser\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"raised\",\n    style: {\n      textAlign: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 35\n    }\n  }, \"Submit\")))))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 14\n    }\n  }, inputMail));\n};\n\nexport default FormUser;","map":{"version":3,"sources":["/Users/mehel-ka/Desktop/Hypertube/src/container/MonCompte/InfoPerso/FormUser/FormUser.jsx"],"names":["React","useEffect","useState","axios","Form","Input","Button","ToastContainer","toast","FormUser","id","setId","idToken","setIdToken","name","setName","lastname","setLastname","login","setLogin","address","setAddress","mail","setMail","length","localStorage","getItem","idLocal","get","then","response","console","log","data","catch","err","error","handleSubmitMail","event","preventDefault","authData","email","returnSecureToken","post","success","autoClose","closeButton","className","put","message","handleSubmit","inputMail","e","target","value","textAlign"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { useEffect,useState} from 'react';\nimport axios from 'axios'\nimport './FormUser.css'\n// import {toast} from 'react-toastify'\n// import 'react-toastify/dist/ReactToastify.css';\nimport Form from 'muicss/lib/react/form';\nimport Input from 'muicss/lib/react/input';\n//import {Alert} from 'react-bootstrap';\nimport Button from 'muicss/lib/react/button';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\n\nconst FormUser = () => {\n\n    const [id, setId] = useState('');\n    const [idToken, setIdToken] = useState('');\n    const [name, setName] = useState('');\n    const [lastname, setLastname] = useState('');\n    const [login, setLogin] = useState('');\n    const [address, setAddress] = useState('');\n    const [mail, setMail] = useState('');\n\n    //const [error, setError] = useState(null);\n\n    useEffect(() => {\n        \n        if (mail.length === 0){\n            setMail(localStorage.getItem('mail'))\n        }\n       setIdToken(localStorage.getItem('token'))\n       setId(localStorage.getItem('id'))\n       let idLocal = localStorage.getItem('id')\n    \n\n       axios.get(`https://api.comparatrip.eu/cities/popular/from/nice/5`)\n       .then(response => {\n            console.log('userrr//////',response.data[0])\n       })\n       .catch(err => {\n            console.log('DIDMOUNT',err)\n       })\n     axios.get(`https://movies-27cd5.firebaseio.com/${idLocal}/mail.json/`)\n        .then(response => {\n         //console.log('MAIL//////',response.data)\n         setMail(response.data.mail);\n        }).catch(error => {\n            //console.log('MAILL//',error)\n        })\n      },[]) \n\n    const handleSubmitMail =(event) => {\n        event.preventDefault(); \n        const authData = {\n            idToken:idToken,\n            email: mail,\n            returnSecureToken: true\n        };\n        axios.post('https://identitytoolkit.googleapis.com/v1/accounts:update?key=AIzaSyDJQ2C-WHsJXu5xVCG5Z98XQ31gRJrSV_E',authData)\n        .then(response => {\n            toast.success('Votre profil a ete mis a jour                     😀', {\n                autoClose: 3000,\n                closeButton:false,\n                className:'toast1'\n            })\n            const mail = { mail:response.data.email };\n            axios.put(`https://movies-27cd5.firebaseio.com/${id}/mail.json/`,mail)\n            .then(response =>{ console.log('MailResponse',response) })\n            .catch(error => { console.log('MailResponse',error) })\n        })\n        .catch(err => {\n            console.log('maillllll',err.response.data.error.message)\n           // setError('Mail deja utilisé veuilleur le modifier')\n           toast.error('Erreur, Veuillez vous reconnectez                     😮', {\n            autoClose: 3000,\n            closeButton:false,\n            className:'toast1'\n        })\n        })      \n    }\n\n    const handleSubmit =(event) => {\n        event.preventDefault(); \n        console.log('STATE===',name,lastname,login,address)\n        const data = {\n            name:name,\n            lastname: lastname,\n            login: login,\n            address: address,\n            //mail: mail\n        };\n        //setAlert(false)\n        axios.put(`https://movies-27cd5.firebaseio.com/${id}/user.json/`,data)\n        .then(response => {\n            console.log('data',response);  \n            toast.success('Votre profil a ete mis a jour                     😀', {\n                autoClose: 3000,\n                closeButton:false,\n                className:'toast1'\n            })   \n        })\n        .catch(err => {\n            console.log('data',err.response)\n            toast.error('Erreur, Veuillez vous reconnectez                        😮', {\n                autoClose: 3000,\n                closeButton:false,\n                className:'toast1'\n            })\n        })    \n    }\n\n  \n\n\n   let inputMail = null;\n  \n   localStorage.getItem('social') ? inputMail = (\n            <div className='blockImage3'>\n                <div className='TitreContainer'>\n                    <h2 className='titreInContainer'>Mail </h2>\n                    <div className='Form'>\n                        <Form onSubmit={handleSubmitMail}>\n                            <Input label=\"E-mail\" minLength=\"6\" type=\"email\" floatingLabel={true} value={mail} pattern=\"[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,}$\" required title=\"email incorrect ex: netflix@gmail.com\"  onChange={(e)=> setMail(e.target.value)}  />\n                            <div className='buttonUser'>\n                            <Button variant=\"raised\" style={{textAlign:'center'}}>Submit</Button>\n                            </div> \n                        </Form>\n                    </div>     \n                </div>\n            </div>) : inputMail = null;\n\n\n    return (\n        <div> \n             <ToastContainer position=\"top-center\" autoClose={3000} hideProgressBar={false} newestOnTop={false} closeOnClick rtl={false} pauseOnFocusLoss draggable pauseOnHover/>\n            <div className='blockImage1User'>\n                    <div className='TitreContainer'>\n                        <h2 className='titreInContainer'>Infos Utilisateurs </h2>\n                        <div className='Form'>\n                            <Form onSubmit={handleSubmit}>\n                                <Input label=\"Nom\" type=\"name\" floatingLabel={true} minLength=\"3\" maxLength=\"30\" pattern=\"[A-Za-z]{1,32}\" value={name} required title=\"Nom incorrect\" onChange={(e)=> setName(e.target.value)} />\n                                <Input label=\"Prenom\" type=\"lastName\"  floatingLabel={true} minLength=\"3\" maxLength=\"30\" pattern=\"[A-Za-z]{1,32}\" value={lastname} required title=\"Prenom incorrect\" onChange={(e)=> setLastname(e.target.value)} />\n                                <Input label=\"Login\" type=\"login\"  floatingLabel={true} required  pattern=\"[A-Za-z0-9]+\" value={login} title= \"lettres et chiffre seulement, pas de ponctuation et caracteres speciaux\" onChange={(e)=> setLogin(e.target.value)}/>\n                                <Input label=\"Address\" type=\"address\"  floatingLabel={true}  required pattern=\"([a-zA-Z0-9áàâäãåçéèêëíìîïñóòôöõúùûüýÿæœÁÀÂÄÃÅÇÉÈÊËÍÌÎÏÑÓÒÔÖÕÚÙÛÜÝŸÆŒ_-]| |/|\\\\|@|#|\\$|%|&)+\" value={address} title= \"pas de caracteres speciaux\"  onChange={(e)=> setAddress(e.target.value)}/>\n                                <div className='buttonUser'>\n                                  <Button variant=\"raised\" style={{textAlign:'center'}}>Submit</Button>\n                                </div> \n                            </Form>\n                        </div>     \n                    </div>    \n             </div>\n             <div>\n                   {inputMail}          \n             </div>\n        </div>\n    )\n}\n\nexport default FormUser;"]},"metadata":{},"sourceType":"module"}