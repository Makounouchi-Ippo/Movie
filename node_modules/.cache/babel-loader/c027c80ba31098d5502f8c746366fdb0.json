{"ast":null,"code":"var _jsxFileName = \"/Users/mehel-ka/Desktop/48/src/container/MonCompte/InfoPerso/ImageProfil/ImageProfil.jsx\";\nimport React, { Component } from 'react';\nimport './ImageProfil.css'; // import {FaPlusCircle} from 'react-icons/fa'\n//import { CgProfile } from 'react-icons/cg'\n\nimport { connect } from 'react-redux';\nimport firebase from '../../../../fire';\nimport * as actions from '../../../../store/actions/index';\nimport { CgProfile } from 'react-icons/cg';\nimport axios from 'axios';\nlet fileName = 'image';\nlet newDirectory = localStorage.getItem('id');\nlet id = localStorage.getItem('id');\nlet storage = firebase.storage().ref(`images/${newDirectory}/${fileName}`);\n\nclass ImageProfil extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      image: null,\n      imageTmp: null,\n      good: false\n    };\n\n    this.handleChange = e => {\n      if (e.target.files[0]) {\n        if (e.target.files[0] !== this.state.image) {\n          this.setState({\n            imageTmp: e.target.files[0],\n            good: true\n          }, () => {\n            if (this.state.good) {\n              if (this.state.image !== undefined) {\n                storage.put(this.state.imageTmp).then(res => {\n                  let ref = this;\n                  storage.getDownloadURL().then(function (url) {\n                    ref.props.photoProfil(url);\n                    ref.setState({\n                      image: url,\n                      good: false\n                    });\n                    const photo = {\n                      photo: true\n                    };\n                    axios.put(`https://movies-27cd5.firebaseio.com/${id}/photo.json/`, photo).then(res => {// console.log(res)\n                    }).catch(err => {// console.log(err)\n                    });\n                  }).catch(err => {// console.log(err)\n                  }); //    console.log(res)\n                }).catch(err => {// console.log(err)\n                });\n              }\n            }\n          });\n        }\n      }\n    };\n  }\n\n  componentDidMount() {\n    if (localStorage.getItem('photo')) {\n      this.setState({\n        image: localStorage.getItem('photo')\n      });\n      this.props.photoProfil(localStorage.getItem('photo'));\n    } else if (localStorage.getItem('photoPhone')) {\n      this.setState({\n        image: localStorage.getItem('photoPhone')\n      });\n      this.props.photoProfil(localStorage.getItem('photoPhone'));\n    } else {\n      let ref = this;\n      axios.get(`https://movies-27cd5.firebaseio.com/${id}/photo.json/`).then(response => {\n        if (response.data.photo === true) {\n          storage.getDownloadURL().then(function (url) {\n            if (url) {\n              ref.setState({\n                image: url\n              });\n              ref.props.photoProfil(url);\n            }\n          }).catch(err => console.log(err));\n        } else this.setState({\n          image: 'https://lebackyard.fr/wp-content/plugins/all-in-one-seo-pack/images/default-user-image.png'\n        });\n      }).catch(err => console.log(err));\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      style: {\n        fontWeight: 'normal',\n        marginTop: '25px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }\n    }, \" Info persos \"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }\n    }, \"Renseignez vos coordonn\\xE9es pour pouvoir passez commandes\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"blockImage1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"TitreContainer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"titreInContainer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 25\n      }\n    }, \" Image Profil \"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"blockimage2Photo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 29\n      }\n    }, this.state.image !== null ? /*#__PURE__*/React.createElement(\"img\", {\n      src: this.state.image,\n      alt: \"\",\n      style: {\n        height: '140px',\n        width: '140px',\n        borderRadius: '50%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 29\n      }\n    }) : /*#__PURE__*/React.createElement(CgProfile, {\n      style: {\n        height: '140px',\n        width: '140px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 31\n      }\n    }), !localStorage.getItem('photoPhone') && !localStorage.getItem('photo') && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"blockButtonPhoto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      style: {\n        display: 'none'\n      },\n      type: \"file\",\n      accept: \"image/*\",\n      onChange: this.handleChange,\n      ref: fileInput => this.fileInput = fileInput,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => this.fileInput.click(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 37\n      }\n    }, \"Upload\"))))));\n  }\n\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    photoProfil: image => dispatch(actions.photoUrl(image))\n  };\n};\n\nexport default connect(null, mapDispatchToProps)(ImageProfil);","map":{"version":3,"sources":["/Users/mehel-ka/Desktop/48/src/container/MonCompte/InfoPerso/ImageProfil/ImageProfil.jsx"],"names":["React","Component","connect","firebase","actions","CgProfile","axios","fileName","newDirectory","localStorage","getItem","id","storage","ref","ImageProfil","state","image","imageTmp","good","handleChange","e","target","files","setState","undefined","put","then","res","getDownloadURL","url","props","photoProfil","photo","catch","err","componentDidMount","get","response","data","console","log","render","fontWeight","marginTop","height","width","borderRadius","display","fileInput","click","mapDispatchToProps","dispatch","photoUrl"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport './ImageProfil.css'\n// import {FaPlusCircle} from 'react-icons/fa'\n//import { CgProfile } from 'react-icons/cg'\nimport { connect } from 'react-redux';\nimport firebase from '../../../../fire';\nimport  * as actions from '../../../../store/actions/index';\nimport { CgProfile } from 'react-icons/cg';\nimport axios from 'axios';\n\nlet fileName = 'image';\nlet newDirectory = localStorage.getItem('id');\nlet id = localStorage.getItem('id');\nlet storage = firebase.storage().ref(`images/${newDirectory}/${fileName}`);\n\nclass ImageProfil extends Component {\n    state = {\n        image: null,\n        imageTmp: null,\n        good: false\n    }\n\n    componentDidMount() {\n        if (localStorage.getItem('photo')) {\n            this.setState({image : localStorage.getItem('photo')})\n            this.props.photoProfil(localStorage.getItem('photo'));\n        }\n        else if (localStorage.getItem('photoPhone')){\n            this.setState({image : localStorage.getItem('photoPhone')})\n            this.props.photoProfil(localStorage.getItem('photoPhone'));\n        }\n        else {\n            let ref = this\n            axios.get(`https://movies-27cd5.firebaseio.com/${id}/photo.json/`)\n            .then(response => { \n                if(response.data.photo === true) {\n                    storage.getDownloadURL()\n                    .then(function(url) {\n                        if (url) {\n                            ref.setState({image: url});\n                            ref.props.photoProfil(url);\n                        }\n                    })\n                    .catch(err => console.log(err))\n                }\n                else\n                    this.setState({image : 'https://lebackyard.fr/wp-content/plugins/all-in-one-seo-pack/images/default-user-image.png'})\n            })\n            .catch(err => console.log(err))\n        }\n    }\n\n    handleChange = (e) => {\n        if (e.target.files[0]) {\n            if (e.target.files[0] !== this.state.image ) {\n                this.setState({imageTmp: e.target.files[0], good: true}, () => {\n                    if(this.state.good) {\n                        if (this.state.image !== undefined) {\n                            storage.put(this.state.imageTmp)\n                                .then(res => { \n                                    let ref = this\n                                    storage.getDownloadURL()\n                                        .then(function(url) {\n                                            ref.props.photoProfil(url);\n                                            ref.setState({image:url, good: false})\n                                            const photo = { photo : true };\n                                            axios.put(`https://movies-27cd5.firebaseio.com/${id}/photo.json/`, photo)\n                                                .then(res => {\n                                                    // console.log(res)\n                                                })\n                                                .catch(err => { \n                                                    // console.log(err)\n                                                })\n                                        })\n                                        .catch(err => {\n                                            // console.log(err)\n                                        })\n                                //    console.log(res)\n                                })\n                                .catch(err => {\n                                    // console.log(err)\n                                })\n                        } \n                    }        \n                })\n            }            \n        }         \n    };\n\n    render() {\n        return (\n            <React.Fragment>\n                <h1 style={{fontWeight:'normal',marginTop:'25px'}}> Info persos </h1>\n                <p>Renseignez vos coordonn√©es pour pouvoir passez commandes</p>\n                <div className='blockImage1'>\n                    <div className='TitreContainer'>\n                        <h2 className='titreInContainer'> Image Profil </h2>\n                            <div className='blockimage2Photo'>\n                                { this.state.image !== null ? \n                            <img src={this.state.image} alt='' style={{height:'140px', width:'140px',borderRadius:'50%'}}/>\n                            : <CgProfile style={{height:'140px', width:'140px'}}/>}\n                            {(!localStorage.getItem('photoPhone') && !localStorage.getItem('photo')) && \n                                <div className='blockButtonPhoto'>\n                                    <input style={{display: 'none'}} type='file' accept=\"image/*\" onChange={this.handleChange} ref={fileInput => this.fileInput = fileInput}/>\n                                    <button onClick={() => this.fileInput.click()}>Upload</button>\n                            </div> }  \n                             </div>\n                    </div>\n                </div>\n            </React.Fragment>\n        )\n    }\n   \n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        photoProfil: (image) => dispatch(actions.photoUrl(image)),\n    };\n};\n\nexport default connect(null, mapDispatchToProps) (ImageProfil);"]},"metadata":{},"sourceType":"module"}