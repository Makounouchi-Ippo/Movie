{"ast":null,"code":"var _jsxFileName = \"/Users/mehel-ka/Desktop/netflix/src/container/MonCompte/InfoPerso/CarteBleu/CarteBleu.jsx\";\nimport React from 'react';\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport './CarteBleu.css';\nimport Cards from 'react-credit-cards';\nimport 'react-credit-cards/es/styles-compiled.css';\nimport Input from 'muicss/lib/react/input';\nimport Button from 'muicss/lib/react/button';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { Modal, Spinner } from 'react-bootstrap';\nimport { useHistory } from 'react-router-dom';\nimport { withRouter } from 'react-router-dom';\n\nconst CarteBleu = () => {\n  const history = useHistory();\n  const [cvc, setCvc] = useState('');\n  const [focus, setFocus] = useState('');\n  const [name, setName] = useState('');\n  const [expiry, setExpiry] = useState('');\n  const [number, setNumber] = useState('');\n  const [modal, setModal] = useState(false);\n  const [spinner, setSpinner] = useState(false);\n  useEffect(() => {\n    let idLocal = localStorage.getItem('id');\n    axios.get(`https://movies-27cd5.firebaseio.com/${idLocal}/CarteBleu.json/`).then(response => {\n      //console.log('userrr//////',response.data)\n      setCvc(response.data.cvc);\n      setName(response.data.name);\n      setExpiry(response.data.expiry);\n      setNumber(response.data.number);\n    }).catch(err => {//console.log('DIDMOUNT',err)\n    });\n  }, []);\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    console.log('STATE===', cvc, name, expiry, number);\n    const data = {\n      name: name,\n      number: number,\n      cvc: cvc,\n      expiry: expiry\n    }; //setAlert(false)\n\n    axios.put(`https://movies-27cd5.firebaseio.com/${localStorage.getItem('id')}/CarteBleu.json/`, data).then(response => {\n      console.log('data', response);\n      toast.success('Votre profil a ete mis a jour                     ðŸ˜€');\n    }).catch(err => {\n      console.log('data', err.response);\n      toast.error('Erreur, veuillez ressayer plus tard                     ðŸ˜®');\n    });\n  };\n\n  const deleteAccount = () => {\n    setSpinner(true);\n    axios.post('https://identitytoolkit.googleapis.com/v1/accounts:delete?key=AIzaSyDJQ2C-WHsJXu5xVCG5Z98XQ31gRJrSV_E', {\n      \"idToken\": localStorage.getItem('token')\n    }).then(res => {\n      console.log('REPONSE DELETE ACCOUNT ===== ', res);\n      setSpinner(false);\n    }).catch(err => {\n      console.log('REPONSE DELETE ACCOUNT ===== ', err);\n      toast.error('Erreur, veuillez vous reconnectez                   ðŸ˜®');\n    });\n  };\n\n  function MyVerticallyCenteredModal(props) {\n    let display = null;\n\n    if (spinner === false) {\n      display = /*#__PURE__*/React.createElement(Modal.Body, {\n        style: {\n          backgroundColor: 'black',\n          color: 'white'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 13\n        }\n      }, \"Nous sommes triste de vous voir partir \\uD83D\\uDE2D \", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 57\n        }\n      }), \"Etes vous sur de vouloir supprimer votre compte ?\", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 64\n        }\n      }), \"Cette action entrainera une supression definitive de vos donn\\xE9es\"));\n    }\n\n    if (spinner === true) {\n      display = /*#__PURE__*/React.createElement(Modal.Body, {\n        style: {\n          backgroundColor: 'black',\n          color: 'white'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Spinner, {\n        animation: \"border\",\n        role: \"status\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"sr-only\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 3\n        }\n      }, \"Loading...\")));\n    }\n\n    return /*#__PURE__*/React.createElement(Modal, Object.assign({}, props, {\n      size: \"lg\",\n      \"aria-labelledby\": \"contained-modal-title-vcenter\",\n      centered: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 11\n      }\n    }), display, /*#__PURE__*/React.createElement(Modal.Footer, {\n      style: {\n        backgroundColor: 'black',\n        color: 'white',\n        display: 'flex',\n        justifyContent: 'space-between'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      onClick: props.onHide,\n      style: {\n        backgroundColor: 'grey'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 15\n      }\n    }, \"Close\"), /*#__PURE__*/React.createElement(Button, {\n      style: {\n        backgroundColor: 'red'\n      },\n      onClick: () => deleteAccount(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 15\n      }\n    }, \"Confirmer suppression\")));\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"blockImage100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(ToastContainer, {\n    position: \"top-center\",\n    autoClose: 5000,\n    hideProgressBar: false,\n    newestOnTop: false,\n    closeOnClick: true,\n    rtl: false,\n    pauseOnFocusLoss: true,\n    draggable: true,\n    pauseOnHover: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 12\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"PaymentForm\",\n    className: \"TitreContainerCarte\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"titreInContainerCarte\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 17\n    }\n  }, \" Carte Bleue \"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"blockCartebleu\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Cartebleu\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Cards, {\n    cvc: cvc,\n    expiry: expiry,\n    focused: focus,\n    name: name,\n    number: number,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"InputCartebleu\",\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    label: \"Card Number\",\n    minLength: \"16\",\n    maxLength: \"16\",\n    value: number,\n    onChange: e => setNumber(e.target.value),\n    onFocus: e => setFocus(e.target.name),\n    pattern: \"[0-9]+\",\n    title: \"please enter number only\",\n    required: true,\n    type: \"tel\",\n    name: \"number\",\n    floatingLabel: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    label: \"Name\",\n    minLength: \"2\",\n    maxLength: \"25\",\n    value: name,\n    onChange: e => setName(e.target.value),\n    onFocus: e => setFocus(e.target.name),\n    pattern: \"^[A-Za-z -]+$\",\n    title: \"please enter letters only\",\n    type: \"text\",\n    required: true,\n    floatingLabel: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cvcDateCartebleu\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    label: \"Date expiry\",\n    minLength: \"4\",\n    maxLength: \"4\",\n    value: expiry,\n    onChange: e => setExpiry(e.target.value),\n    onFocus: e => setFocus(e.target.name),\n    pattern: \"[0-9]+\",\n    title: \"please enter number only\",\n    required: true,\n    type: \"text\",\n    name: \"expiry\",\n    floatingLabel: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 37\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    label: \"CVC\",\n    minLength: \"3\",\n    maxLength: \"3\",\n    value: cvc,\n    onChange: e => setCvc(e.target.value),\n    onFocus: e => setFocus(e.target.name),\n    pattern: \"[0-9]+\",\n    title: \"please enter number only\",\n    type: \"tel\",\n    name: \"cvc\",\n    required: true,\n    floatingLabel: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 37\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"buttonUserCarteBleu\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"buttonCarteBleu\",\n    variant: \"raised\",\n    style: {\n      textAlign: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 37\n    }\n  }, \"Submit\")))))), !localStorage.getItem('photo') && /*#__PURE__*/React.createElement(Button, {\n    className: \"buttonCarteBleu\",\n    variant: \"raised\",\n    style: {\n      textAlign: 'center'\n    },\n    onClick: () => setModal(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 43\n    }\n  }, \"Supprimer son compte\"), /*#__PURE__*/React.createElement(MyVerticallyCenteredModal, {\n    show: modal,\n    onHide: () => setModal(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 9\n    }\n  }));\n};\n\nexport default withRouter(CarteBleu);","map":{"version":3,"sources":["/Users/mehel-ka/Desktop/netflix/src/container/MonCompte/InfoPerso/CarteBleu/CarteBleu.jsx"],"names":["React","useState","useEffect","axios","Cards","Input","Button","ToastContainer","toast","Modal","Spinner","useHistory","withRouter","CarteBleu","history","cvc","setCvc","focus","setFocus","name","setName","expiry","setExpiry","number","setNumber","modal","setModal","spinner","setSpinner","idLocal","localStorage","getItem","get","then","response","data","catch","err","handleSubmit","event","preventDefault","console","log","put","success","error","deleteAccount","post","res","MyVerticallyCenteredModal","props","display","backgroundColor","color","justifyContent","onHide","e","target","value","textAlign"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { useState,useEffect } from 'react'\nimport axios from 'axios'\nimport './CarteBleu.css'\nimport Cards from 'react-credit-cards';\nimport 'react-credit-cards/es/styles-compiled.css'\nimport Input from 'muicss/lib/react/input';\nimport Button from 'muicss/lib/react/button';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport {Modal,Spinner} from 'react-bootstrap'\nimport { useHistory } from 'react-router-dom';\nimport { withRouter } from 'react-router-dom';\n\nconst CarteBleu = () => {\n    const history = useHistory();\n    const [cvc, setCvc] = useState('')\n    const [focus, setFocus] = useState('')\n    const [name, setName] = useState('')\n    const [expiry, setExpiry] = useState('')\n    const [number, setNumber] = useState('')\n    const [modal, setModal] = useState(false);\n    const [spinner, setSpinner] = useState(false);\n\n\n\n    useEffect(() => {\n       let idLocal = localStorage.getItem('id')\n    \n       axios.get(`https://movies-27cd5.firebaseio.com/${idLocal}/CarteBleu.json/`)\n       .then(response => {\n            //console.log('userrr//////',response.data)\n            setCvc(response.data.cvc) \n            setName(response.data.name)   \n            setExpiry(response.data.expiry)  \n            setNumber(response.data.number)  \n       })\n       .catch(err => {\n            //console.log('DIDMOUNT',err)\n       })\n      },[]) \n\n\n    const handleSubmit =(event) => {\n        event.preventDefault(); \n        console.log('STATE===',cvc,name,expiry,number)\n        const data = {\n            name:name,\n            number: number,\n            cvc: cvc,\n            expiry: expiry,\n        };\n        //setAlert(false)\n        axios.put(`https://movies-27cd5.firebaseio.com/${localStorage.getItem('id')}/CarteBleu.json/`,data)\n        .then(response => {\n            console.log('data',response);  \n            toast.success('Votre profil a ete mis a jour                     ðŸ˜€')\n          \n        })\n        .catch(err => {\n            console.log('data',err.response)\n            toast.error('Erreur, veuillez ressayer plus tard                     ðŸ˜®')\n     \n        })    \n    }\n\n    const deleteAccount = () => {\n        setSpinner(true)\n        axios.post('https://identitytoolkit.googleapis.com/v1/accounts:delete?key=AIzaSyDJQ2C-WHsJXu5xVCG5Z98XQ31gRJrSV_E',{\n        \"idToken\": localStorage.getItem('token')\n      })\n      .then(res =>{\n          console.log('REPONSE DELETE ACCOUNT ===== ',res)\n         setSpinner(false)\n          })\n      .catch(err => {\n                console.log('REPONSE DELETE ACCOUNT ===== ',err)\n                toast.error('Erreur, veuillez vous reconnectez                   ðŸ˜®')\n\n        })\n    }\n\n    \n    function MyVerticallyCenteredModal(props) {\n\n        let display = null\n        if (spinner === false){\n            display = ( <Modal.Body  style={{backgroundColor:'black',color:'white'}}>\n            <p>\n              Nous sommes triste de vous voir partir ðŸ˜­ <br/>\n              Etes vous sur de vouloir supprimer votre compte ?<br/>\n              Cette action entrainera une supression definitive de vos donnÃ©es\n            </p>\n\n      </Modal.Body>)}\n      if (spinner === true){\n        display = ( <Modal.Body  style={{backgroundColor:'black',color:'white'}}>\n            <Spinner animation=\"border\" role=\"status\">\n  <span className=\"sr-only\">Loading...</span>\n</Spinner>\n\n  </Modal.Body>)\n      }\n\n        return (\n          <Modal\n            {...props}\n            size=\"lg\"\n            aria-labelledby=\"contained-modal-title-vcenter\"\n            centered\n          >\n              {display}\n            <Modal.Footer style={{backgroundColor:'black',color:'white',display:'flex',justifyContent:'space-between'}}>\n              <Button onClick={props.onHide} style={{backgroundColor:'grey'}}>Close</Button>\n              <Button style={{backgroundColor:'red'}} onClick={()=>deleteAccount()}>Confirmer suppression</Button>\n            </Modal.Footer>\n          </Modal>\n        );\n      }\n\n    return (\n    <>\n        <div className='blockImage100'>\n           <ToastContainer position=\"top-center\" autoClose={5000} hideProgressBar={false} newestOnTop={false} closeOnClick rtl={false} pauseOnFocusLoss draggable pauseOnHover/>\n            <div id=\"PaymentForm\" className='TitreContainerCarte'>\n                <h2 className='titreInContainerCarte'> Carte Bleue </h2>   \n                    <div className='blockCartebleu'>\n                        <div className='Cartebleu'>\n                        <Cards \n                            cvc={cvc}\n                            expiry={expiry}\n                            focused={focus}\n                            name={name}\n                            number={number}\n                            />\n                        </div>\n                        <form className='InputCartebleu' onSubmit={handleSubmit}>\n                                <Input  label=\"Card Number\" minLength=\"16\" maxLength=\"16\"  value={number} onChange={(e) => setNumber(e.target.value)} onFocus={e => setFocus(e.target.name)} pattern =\"[0-9]+\" title=\"please enter number only\" required type='tel'  name='number' floatingLabel={true} />\n                                <Input  label=\"Name\" minLength=\"2\" maxLength=\"25\"  value={name} onChange={(e) => setName(e.target.value)} onFocus={e => setFocus(e.target.name)}  pattern=\"^[A-Za-z -]+$\" title=\"please enter letters only\" type=\"text\" required  floatingLabel={true} />\n                                <div className='cvcDateCartebleu'>\n                                    <Input  label=\"Date expiry\" minLength=\"4\" maxLength=\"4\"  value={expiry} onChange={(e) => setExpiry(e.target.value)} onFocus={e => setFocus(e.target.name)} pattern =\"[0-9]+\" title=\"please enter number only\"  required  type=\"text\" name ='expiry' floatingLabel={true} />\n                                    <Input  label=\"CVC\" minLength=\"3\" maxLength=\"3\"  value={cvc} onChange={(e) => setCvc(e.target.value)} onFocus={e => setFocus(e.target.name)} pattern =\"[0-9]+\" title=\"please enter number only\"  type=\"tel\" name='cvc' required  floatingLabel={true} />\n                                </div>\n                                <div className='buttonUserCarteBleu'>\n                                    <Button  className='buttonCarteBleu' variant=\"raised\" style={{textAlign:'center'}}>Submit</Button>\n                                </div>\n                       </form>\n                    </div>\n            </div>\n        </div>\n      { !localStorage.getItem('photo') && <Button  className='buttonCarteBleu' variant=\"raised\" style={{textAlign:'center'}} onClick={()=>setModal(true)}>Supprimer son compte</Button>}  \n        <MyVerticallyCenteredModal\n        show={modal}\n        onHide={() => setModal(false)}\n      />\n      </>\n    )\n}\n\nexport default  withRouter((CarteBleu));"]},"metadata":{},"sourceType":"module"}