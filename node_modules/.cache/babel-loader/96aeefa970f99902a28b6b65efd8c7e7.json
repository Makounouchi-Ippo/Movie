{"ast":null,"code":"var _jsxFileName = \"/Users/mehel-ka/Desktop/Hypertube/src/container/MonCompte/Social/Social.jsx\";\nimport React, { useState, useEffect, useCallback } from 'react';\nimport MyModal from '../../../components/Modal/Modal';\nimport Switch from \"react-switch\";\nimport { useHistory } from 'react-router-dom';\nimport { ToastContainer, toast, Zoom } from 'react-toastify';\nimport { useDispatch } from 'react-redux';\nimport axios from 'axios';\nimport 'react-toastify/dist/ReactToastify.css';\nimport './Social.css';\nimport * as actions from '../../../store/actions/index';\n\nconst Social = () => {\n  const [btnMembre, setBtnMembre] = useState(false);\n  const [btnNewsletter, setBtnNewsletter] = useState(false);\n  const [ok, setOk] = useState(false);\n  const [ok1, setOk1] = useState(false);\n  const [showModal, setShowModal] = useState(false);\n  const [name, setName] = useState(null);\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const tchat = useCallback(value => {\n    dispatch(actions.tchat(value));\n  }, [dispatch]);\n  useEffect(() => {\n    axios.get(`https://movies-27cd5.firebaseio.com/${localStorage.getItem('id')}/social.json/`).then(res => {\n      setBtnMembre(res.data.social);\n    }).catch(err => {});\n    axios.get(`https://movies-27cd5.firebaseio.com/${localStorage.getItem('id')}/newsletter.json/`).then(res => {\n      setBtnNewsletter(res.data.newsletter);\n    }).catch(err => {});\n    axios.get(`https://movies-27cd5.firebaseio.com/${localStorage.getItem('id')}/user.json/`).then(res => {\n      setName(res.data.name);\n    }).catch(err => {});\n  }, []);\n  useEffect(() => {\n    if (ok) {\n      btnMembre ? axios.put(`https://movies-27cd5.firebaseio.com/${localStorage.getItem('id')}/social.json/`, {\n        social: btnMembre\n      }).then(res => {\n        toast.success(\"Nous sommes heureux de vous compter parmis nos membres.\", {\n          className: \"toastCss\"\n        });\n        tchat(btnMembre);\n      }).catch(err => {}) : axios.put(`https://movies-27cd5.firebaseio.com/${localStorage.getItem('id')}/social.json/`, {\n        social: btnMembre\n      }).then(res => {\n        toast.error(\"Nous sommes triste de ne plus vous compter parmis nos membres.\", {\n          className: \"toastCss\"\n        });\n        tchat(btnMembre);\n      }).catch(err => {});\n    }\n\n    if (ok1) {\n      btnNewsletter ? axios.put(`https://movies-27cd5.firebaseio.com/${localStorage.getItem('id')}/newsletter.json/`, {\n        newsletter: btnNewsletter\n      }).then(res => toast.success(\"Vous etes maintenant abonneer a notre newsletter\", {\n        className: \"toastCss\"\n      })).catch(err => {}) : axios.put(`https://movies-27cd5.firebaseio.com/${localStorage.getItem('id')}/newsletter.json/`, {\n        newsletter: btnNewsletter\n      }).then(res => toast.error(\"Vous etes desabonner a notre newsletter\", {\n        className: \"toastCss\"\n      })).catch(err => {});\n    }\n  }, [btnMembre, btnNewsletter, ok, ok1]); //utiliser useCallbackwithtruc pour thcat();\n\n  const handleChange = id => {\n    if (name) {\n      setOk(true);\n      setOk1(true);\n\n      if (id === 'membre') {\n        setOk1(false);\n        setBtnMembre(prev => !prev);\n      } else if (id === 'newsletter') {\n        setOk(false);\n        setBtnNewsletter(prev => !prev);\n      }\n    } else setShowModal(true);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"PageMyInfo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(MyModal, {\n    click: () => {\n      history.push('/profil');\n    },\n    showModal: showModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"Title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }\n  }, \"Social\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"BlockContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"TitleBackground\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"h4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 21\n    }\n  }, \"Rejoignez-nous\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"BlockSocial1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"GaucheSocial\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"h4Social\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 25\n    }\n  }, \" Avantages \\xE0 devenir membre :\"), /*#__PURE__*/React.createElement(\"ul\", {\n    style: {\n      padding: '0'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: \"liSocial\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 29\n    }\n  }, \"Discuter avec les membres de la communaut\\xE9 \\xE0 travers la tchat instan\\xE9e\"), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"liSocial\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 29\n    }\n  }, \"Contribuez \\xE0 am\\xE9liorer les informations de notre base de donn\\xE9es.\"), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"liSocial\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 29\n    }\n  }, \"Profitez des dernieres infos et exclu grace a un communaut\\xE9 reactive\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Switch\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Switch, {\n    onChange: () => handleChange('membre'),\n    checked: btnMembre,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 25\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"BlockContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"TitleBackground\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"h4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 21\n    }\n  }, \"Newsletter\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"BlockSocial2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"GaucheSocial\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"h4Social\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 25\n    }\n  }, \"Avantages :\"), /*#__PURE__*/React.createElement(\"ul\", {\n    style: {\n      padding: '0'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: \"liSocial\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 29\n    }\n  }, \"Info en exlusivit\\xE9 \"), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"liSocial\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 29\n    }\n  }, \"Profitez en exclu des info sur tout les film tendance\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Switch\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Switch, {\n    onChange: () => handleChange('newsletter'),\n    checked: btnNewsletter,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(ToastContainer, {\n    transition: Zoom,\n    position: \"top-center\",\n    pauseOnFocusLoss: true,\n    type: \"dark\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 25\n    }\n  })))));\n};\n\nexport default Social;","map":{"version":3,"sources":["/Users/mehel-ka/Desktop/Hypertube/src/container/MonCompte/Social/Social.jsx"],"names":["React","useState","useEffect","useCallback","MyModal","Switch","useHistory","ToastContainer","toast","Zoom","useDispatch","axios","actions","Social","btnMembre","setBtnMembre","btnNewsletter","setBtnNewsletter","ok","setOk","ok1","setOk1","showModal","setShowModal","name","setName","history","dispatch","tchat","value","get","localStorage","getItem","then","res","data","social","catch","err","newsletter","put","success","className","error","handleChange","id","prev","push","padding"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport MyModal from '../../../components/Modal/Modal';\nimport Switch from \"react-switch\";\nimport { useHistory } from 'react-router-dom';\nimport { ToastContainer, toast, Zoom } from 'react-toastify';\nimport { useDispatch } from 'react-redux';\nimport axios from 'axios';\nimport 'react-toastify/dist/ReactToastify.css';\nimport './Social.css';\nimport  * as actions from '../../../store/actions/index';\n\nconst Social = () => {\n    const [btnMembre, setBtnMembre] = useState(false);\n    const [btnNewsletter, setBtnNewsletter] = useState(false);\n    const [ok, setOk] = useState(false);\n    const [ok1, setOk1] = useState(false)\n    const [showModal, setShowModal] = useState(false);\n    const [name,setName] = useState(null)\n    const history = useHistory();\n\n    const dispatch = useDispatch();\n    const tchat = useCallback((value) => { \n        dispatch(actions.tchat(value));\n    }, [dispatch]);\n\n    useEffect(()=>{\n        axios.get(`https://movies-27cd5.firebaseio.com/${localStorage.getItem('id')}/social.json/`)\n            .then(res => { setBtnMembre(res.data.social);})\n            .catch(err => {})\n        axios.get(`https://movies-27cd5.firebaseio.com/${localStorage.getItem('id')}/newsletter.json/`)\n            .then(res => { setBtnNewsletter(res.data.newsletter);})\n            .catch(err => {})\n        axios.get(`https://movies-27cd5.firebaseio.com/${localStorage.getItem('id')}/user.json/`)\n            .then(res => {setName(res.data.name)})\n            .catch(err => {})\n    },[])\n\n    useEffect(() => {\n        if (ok) {\n            btnMembre ? \n            axios.put(`https://movies-27cd5.firebaseio.com/${localStorage.getItem('id')}/social.json/`,{ social : btnMembre })\n                .then(res => {\n                    toast.success(\"Nous sommes heureux de vous compter parmis nos membres.\", {  className: \"toastCss\" })\n                    tchat(btnMembre)\n                })\n                .catch(err => {})\n            : axios.put(`https://movies-27cd5.firebaseio.com/${localStorage.getItem('id')}/social.json/`,{ social : btnMembre })\n                .then(res => {\n                    toast.error(\"Nous sommes triste de ne plus vous compter parmis nos membres.\", {  className: \"toastCss\" })\n                    tchat(btnMembre)\n                })\n                .catch(err => {})\n        } \n        if (ok1) {\n            btnNewsletter ? \n            axios.put(`https://movies-27cd5.firebaseio.com/${localStorage.getItem('id')}/newsletter.json/`,{ newsletter : btnNewsletter })\n                .then(res => toast.success(\"Vous etes maintenant abonneer a notre newsletter\", {  className: \"toastCss\" }))\n                .catch(err => {})\n            : axios.put(`https://movies-27cd5.firebaseio.com/${localStorage.getItem('id')}/newsletter.json/`,{ newsletter : btnNewsletter })\n                .then(res => toast.error(\"Vous etes desabonner a notre newsletter\", {  className: \"toastCss\" }))\n                .catch(err => {})\n        }\n           \n    }, [btnMembre, btnNewsletter, ok, ok1]);\n    //utiliser useCallbackwithtruc pour thcat();\n\n    const handleChange = (id) => {\n        if(name) {\n            setOk(true);\n            setOk1(true);\n            if (id === 'membre') {\n                setOk1(false)\n                setBtnMembre(prev => !prev);\n            }\n            else if (id === 'newsletter') {\n                setOk(false)\n                setBtnNewsletter(prev => !prev);\n            }\n        }\n        else \n            setShowModal(true)   \n    }\n\n    return (\n        <div className='PageMyInfo'>\n            <MyModal click={() => { history.push('/profil')}} showModal={showModal}/>\n            <h1 className='Title'>Social</h1>\n            <div className=\"BlockContainer\">\n                <div className=\"TitleBackground\">\n                    <h4 className='h4'>Rejoignez-nous</h4>\n                </div>\n                <div className=\"BlockSocial1\">\n                    <div className=\"GaucheSocial\">\n                        <h4 className=\"h4Social\"> Avantages à devenir membre :</h4>\n                        <ul style={{padding:'0'}}>\n                            <li className=\"liSocial\">Discuter avec les membres de la communauté à travers la tchat instanée</li>\n                            <li className=\"liSocial\">Contribuez à améliorer les informations de notre base de données.</li>\n                            <li className=\"liSocial\">Profitez des dernieres infos et exclu grace a un communauté reactive</li>\n                        </ul>\n                    </div>\n                    <div className=\"Switch\">\n                        <Switch onChange={() => handleChange('membre')} checked={btnMembre}/>\n                    </div>\n                </div>\n            </div>\n            <div className=\"BlockContainer\">\n                <div className=\"TitleBackground\">\n                    <h4 className='h4'>Newsletter</h4>\n                </div>\n                <div className=\"BlockSocial2\">\n                    <div className=\"GaucheSocial\">\n                        <h4 className=\"h4Social\">Avantages :</h4>\n                        <ul style={{padding:'0'}}>\n                            <li className=\"liSocial\">Info en exlusivité </li>\n                            <li className=\"liSocial\">Profitez en exclu des info sur tout les film tendance</li>\n                        </ul>\n                    </div>\n                    <div className=\"Switch\">\n                        <Switch onChange={() => handleChange('newsletter')} checked={btnNewsletter}/>\n                        <ToastContainer transition={Zoom} position=\"top-center\" pauseOnFocusLoss type=\"dark\"/>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default Social;"]},"metadata":{},"sourceType":"module"}