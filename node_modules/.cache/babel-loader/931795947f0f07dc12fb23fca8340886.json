{"ast":null,"code":"var _jsxFileName = \"/Users/mehel-ka/Desktop/48/src/container/MonCompte/InfoPerso/ImageProfil/ImageProfil.jsx\";\nimport React, { useState, useEffect, useCallback } from 'react';\nimport './ImageProfil.css'; // import {FaPlusCircle} from 'react-icons/fa'\n//import { CgProfile } from 'react-icons/cg'\n\nimport firebase from '../../../../fire';\nimport { useDispatch } from 'react-redux';\nimport * as actions from '../../../../store/actions/index';\nimport { CgProfile } from 'react-icons/cg';\n\nconst ImageProfil = () => {\n  let id = localStorage.getItem('id');\n  let fileName = 'image';\n  let newDirectory = id;\n  let storage = firebase.storage().ref(`images/${newDirectory}/${fileName}`);\n  const [image, setImage] = useState(null);\n  const [imageTmp, setImageTmp] = useState(null);\n  const [good, setGood] = useState(false);\n  const dispatch = useDispatch();\n  const photoProfil = useCallback(image => dispatch(actions.photoUrl(image)), [dispatch]);\n  let imageProfil = localStorage.getItem('photo');\n  let photoPhone = localStorage.getItem('photoPhone');\n  useEffect(() => {\n    if (localStorage.getItem('photo')) {\n      setImage(localStorage.getItem('photo'));\n      photoProfil(localStorage.getItem('photo'));\n    } else if (localStorage.getItem('photoPhone')) {\n      setImage(localStorage.getItem('photoPhone'));\n      photoProfil(localStorage.getItem('photoPhone'));\n    } else {\n      storage.getDownloadURL().then(function (url) {\n        if (url) {\n          photoProfil(url);\n          setImage(url);\n        }\n      }).catch(err => {\n        setImage('https://lebackyard.fr/wp-content/plugins/all-in-one-seo-pack/images/default-user-image.png');\n        console.log(err);\n      });\n    }\n  }, [photoProfil, storage]);\n\n  const handleChange = e => {\n    if (e.target.files[0]) {\n      if (e.target.files[0] !== image) {\n        setImageTmp(e.target.files[0]);\n        setGood(true);\n      }\n    }\n  };\n\n  const handleUpload = async e => {\n    if (good) {\n      if (image !== undefined) {\n        await storage.put(imageTmp).then(res => console.log(res)).catch(err => console.log(err));\n      }\n\n      await storage.getDownloadURL().then(function (url) {\n        photoProfil(url);\n        setImage(url);\n        setGood(false);\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    style: {\n      fontWeight: 'normal',\n      marginTop: '25px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }, \" Info persos \"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }\n  }, \"Renseignez vos coordonn\\xE9es pour pouvoir passez commandes\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"blockImage1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"TitreContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"titreInContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 21\n    }\n  }, \" Image Profil \"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"blockimage2Photo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 25\n    }\n  }, image !== null ? /*#__PURE__*/React.createElement(\"img\", {\n    src: image,\n    alt: \"\",\n    style: {\n      height: '140px',\n      width: '140px',\n      borderRadius: '50%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 25\n    }\n  }) : /*#__PURE__*/React.createElement(CgProfile, {\n    style: {\n      height: '140px',\n      width: '140px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 27\n    }\n  }), !imageProfil && !photoPhone && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"blockButtonPhoto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 59\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    accept: \"image/*\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleUpload,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 29\n    }\n  }, \"Upload\"))))));\n};\n\nexport default ImageProfil;","map":{"version":3,"sources":["/Users/mehel-ka/Desktop/48/src/container/MonCompte/InfoPerso/ImageProfil/ImageProfil.jsx"],"names":["React","useState","useEffect","useCallback","firebase","useDispatch","actions","CgProfile","ImageProfil","id","localStorage","getItem","fileName","newDirectory","storage","ref","image","setImage","imageTmp","setImageTmp","good","setGood","dispatch","photoProfil","photoUrl","imageProfil","photoPhone","getDownloadURL","then","url","catch","err","console","log","handleChange","e","target","files","handleUpload","undefined","put","res","fontWeight","marginTop","height","width","borderRadius"],"mappings":"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","sourcesContent":["import React, { useState,useEffect, useCallback } from 'react'\nimport './ImageProfil.css'\n// import {FaPlusCircle} from 'react-icons/fa'\n//import { CgProfile } from 'react-icons/cg'\nimport firebase from '../../../../fire';\nimport {useDispatch} from 'react-redux';\nimport  * as actions from '../../../../store/actions/index';\nimport { CgProfile } from 'react-icons/cg';\n\nconst ImageProfil = () => {\n\n    let id = localStorage.getItem('id');\n    let fileName = 'image';\n    let newDirectory = id;\n    let storage = firebase.storage().ref(`images/${newDirectory}/${fileName}`);\n    \n    const [ image, setImage ] = useState(null);\n    const [ imageTmp, setImageTmp ] = useState(null);\n    const [ good, setGood ] = useState(false);\n\n    const dispatch = useDispatch();\n    const photoProfil = useCallback((image) => dispatch(actions.photoUrl(image)),[dispatch])\n\n    let imageProfil = localStorage.getItem('photo');\n    let photoPhone = localStorage.getItem('photoPhone');\n\n    useEffect (() => {\n        if (localStorage.getItem('photo')) {\n            setImage(localStorage.getItem('photo')) \n            photoProfil(localStorage.getItem('photo'));\n        }\n        else if (localStorage.getItem('photoPhone')){\n            setImage(localStorage.getItem('photoPhone')) \n            photoProfil(localStorage.getItem('photoPhone'));\n        }\n        else{\n                storage.getDownloadURL()\n                .then(function(url) {\n                    if (url) {\n                        photoProfil(url);\n                        setImage(url);\n                    }\n                })\n                .catch(err => {\n                    setImage('https://lebackyard.fr/wp-content/plugins/all-in-one-seo-pack/images/default-user-image.png')\n                    console.log(err)\n                })\n        }\n    }, [ photoProfil, storage])\n\n    const handleChange = (e) => {\n        if (e.target.files[0]) {\n            if (e.target.files[0] !== image ) {\n                setImageTmp(e.target.files[0]);\n                setGood(true);\n            }            \n        }         \n    };\n    \n    const handleUpload = async (e) => {\n  \n        if(good) {\n            if (image !== undefined) {\n                await storage.put(imageTmp)\n                    .then(res => console.log(res))\n                    .catch(err => console.log(err))\n            }\n            await storage.getDownloadURL()\n                .then(function(url) {\n                    photoProfil(url);\n                    setImage(url);\n                    setGood(false);                \n                })\n                .catch(err => {\n                    console.log(err)\n                })\n        }        \n    }\n\n    return (\n        <React.Fragment>\n            <h1 style={{fontWeight:'normal',marginTop:'25px'}}> Info persos </h1>\n            <p>Renseignez vos coordonn√©es pour pouvoir passez commandes</p>\n            <div className='blockImage1'>\n                <div className='TitreContainer'>\n                    <h2 className='titreInContainer'> Image Profil </h2>\n                        <div className='blockimage2Photo'>\n                            { image !== null ? \n                        <img src={image} alt='' style={{height:'140px', width:'140px',borderRadius:'50%'}}/>\n                        : <CgProfile style={{height:'140px', width:'140px'}}/>}\n                        { !imageProfil &&  !photoPhone && <div className='blockButtonPhoto'>\n                            <input type='file' accept=\"image/*\" onChange={handleChange}  />\n                            <button onClick={handleUpload}>Upload</button>\n                        </div> }  \n                         </div>\n                </div>\n            </div>\n        </React.Fragment>\n    )\n}\n\nexport default ImageProfil;"]},"metadata":{},"sourceType":"module"}